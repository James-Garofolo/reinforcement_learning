from math import floor
# This code is used to determine the average return from exploitation-only strategy via theoretic analysis

K = 100 # Total number of trials.
N = 4 # Number of machines.
p1 = 0.3 # Success rate of machine 1.
p2 = 0.5 # Success rate of machine 2.
p3 = 0.2 # Success rate of machine 3.
p4 = 0.8 # Success rate of machine 4.
r = 1 # Reward of a success trial.
total_return = 0

for k in range(1,K):#= 1:K
    r_k = k%N
    q_k = floor(k/N)
    if r_k == 0:
        p_k = p4
        a_1 = 0
        a_2 = 0
        a_4 = -1
    elif r_k == 1:
        p_k = p1
        a_1 = 0
        a_2 = 0
        a_4 = 0
    elif r_k == 2:
        p_k = p2
        a_1 = 1
        a_2 = 0
        a_4 = 0
    else:
        p_k = p3
        a_1 = 1
        a_2 = 1
        a_4 = 0

    expected_reward_k = 1 + (K-k)*p_k
    return_k = ((1-p1)**(q_k+a_1)) * ((1-p2)**(q_k+a_2)) * ((1-p3)**(q_k))\
        * ((1-p4)**(q_k+a_4)) * p_k * expected_reward_k
    total_return = total_return + return_k

print(total_return, 80-total_return)
